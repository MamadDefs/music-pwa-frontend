{"ast":null,"code":"import _slicedToArray from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Outlet,Link,useLocation,redirect}from\"react-router-dom\";import LoadingOval from'../componenets/LoadingOval/LoadingOval';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(_ref){var setMusicInfo=_ref.setMusicInfo;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),musicCount=_useState4[0],setMusicCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),limit=_useState6[0],setLimit=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];useEffect(function(){var jwtToken=document.cookie.split('=')[1];var option={method:'GET',headers:{'Content-type':'application/json; charset=UTF-8'}};setLoading(true);fetch(\"https://music-pwa-api.iran.liara.run/api/musics/all?page=1&limit=\".concat(limit*9+9),option).then(function(res){return res.json();}).then(function(d){setData(d.musics);setLoading(false);});fetch('https://music-pwa-api.iran.liara.run/api/musics/count',option).then(function(res){return res.json();}).then(function(d){setMusicCount(d.count);});},[]);var loadmore=function loadmore(){setLimit(limit+1);var option={method:'GET',headers:{'Content-type':'application/json; charset=UTF-8'}};setLoading(true);fetch(\"https://music-pwa-api.iran.liara.run/api/musics/all?page=1&limit=\".concat((limit+1)*9+9),option).then(function(res){return res.json();}).then(function(d){setLoading(false);setData(d.musics);});};var test={backgroundColor:'white'};if(!data)return/*#__PURE__*/_jsx(LoadingOval,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content-holder\",children:[/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"music-section-title\",children:\"\\u0645\\u0648\\u0632\\u06CC\\u06A9 \\u0647\\u0627\\u06CC \\u0648\\u06CC\\u0698\\u0647\"}),/*#__PURE__*/_jsx(\"div\",{className:\"music-section\",children:data===null||data===void 0?void 0:data.map(function(q,index){var _q$artist;return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"img\",{src:q===null||q===void 0?void 0:q.coverImagePath,alt:\"\",onClick:function onClick(){return setMusicInfo(q);},className:\"song-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"song-name\",children:q===null||q===void 0?void 0:q.title}),/*#__PURE__*/_jsx(\"h4\",{className:\"artist-name\",children:q===null||q===void 0?void 0:(_q$artist=q.artist)===null||_q$artist===void 0?void 0:_q$artist.map(function(r){return r+\" \";})})]},index);})}),musicCount>data.length?/*#__PURE__*/_jsx(\"div\",{className:\"loadmore-btn\",onClick:function onClick(){return loadmore();},children:\"\\u0628\\u06CC\\u0634\\u062A\\u0631 \\u0646\\u0634\\u0627\\u0646 \\u0628\\u062F\\u0647\"}):'']});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","Outlet","Link","useLocation","redirect","LoadingOval","Backdrop","CircularProgress","HomePage","setMusicInfo","data","setData","musicCount","setMusicCount","limit","setLimit","loading","setLoading","jwtToken","document","cookie","split","option","method","headers","fetch","then","res","json","d","musics","count","loadmore","test","backgroundColor","color","zIndex","theme","drawer","map","q","index","coverImagePath","title","artist","r","length"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/HomePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Outlet, Link, useLocation, redirect } from \"react-router-dom\";\nimport LoadingOval from '../componenets/LoadingOval/LoadingOval'\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\n\nconst HomePage = ({setMusicInfo}) => {\n\n\n\n  const [data, setData] = useState(null);\n  const [musicCount, setMusicCount] = useState(null);\n  const [limit, setLimit] = useState(0);\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const jwtToken = document.cookie.split('=')[1];\n    const option = {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n      }\n    };\n    setLoading(true);\n    fetch(`https://music-pwa-api.iran.liara.run/api/musics/all?page=1&limit=${limit*9+9}`, option)\n      .then((res) => res.json())\n      .then((d) => {\n        setData(d.musics)\n        setLoading(false);\n      })\n      fetch('https://music-pwa-api.iran.liara.run/api/musics/count', option)\n      .then((res) => res.json())\n      .then((d) => {\n        setMusicCount(d.count)\n      })\n  }, []);\n\n\n  const loadmore=()=>{\n    setLimit(limit+1);\n    const option = {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n      }\n    };\n    setLoading(true);\n    fetch(`https://music-pwa-api.iran.liara.run/api/musics/all?page=1&limit=${(limit+1)*9+9}`, option)\n      .then((res) => res.json())\n      .then((d) => {\n        setLoading(false);\n        setData(d.musics)\n      })\n  }\n\n  var test={\n    backgroundColor:'white'\n  }\n  if (!data) return (<LoadingOval />)\n\n  return (\n    <div className=\"page-content-holder\">\n      <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={loading}\n      >\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <h2 className=\"music-section-title\">موزیک های ویژه</h2>\n      <div className=\"music-section\">\n        {data?.map((q, index) => {\n          return (\n            <div key={index} className=\"post\">\n              <img src={q?.coverImagePath} alt=\"\" onClick={()=>setMusicInfo(q)} className=\"song-image\" />\n              <h3 className=\"song-name\">{q?.title}</h3>\n              <h4 className=\"artist-name\">{q?.artist?.map(r => { return (r + \" \") })}</h4>\n            </div>\n          )\n        })}\n      </div>\n      { musicCount>data.length ? <div className='loadmore-btn' onClick={()=>loadmore()}>بیشتر نشان بده</div> : ''}\n    </div>\n  )\n}\n\n\n\nexport default HomePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}