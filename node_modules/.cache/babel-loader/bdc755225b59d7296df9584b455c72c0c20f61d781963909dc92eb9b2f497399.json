{"ast":null,"code":"import _slicedToArray from\"D:/github/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),signupUsername=_useState2[0],setSignupUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),signupEmail=_useState4[0],setSignupEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),signupPassword=_useState6[0],setSignupPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),signupRePassword=_useState8[0],setSignupRePassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),signinUsername=_useState10[0],setSigninUsername=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),signinPassword=_useState12[0],setSigninPassword=_useState12[1];var navigate=useNavigate();var onSignup=function onSignup(e){e.preventDefault();var option={method:'POST',body:JSON.stringify({username:signupUsername,email:signupEmail,password:signupPassword,passwordConfirm:signupRePassword}),headers:{'Content-type':'application/json; charset=UTF-8'}};fetch('https://music-pwa-api.iran.liara.run/api/users/sign-up',option).then(function(res){return res.json();}).then(function(data){console.log(data);});};var onSignin=function onSignin(e){e.preventDefault();var option={method:'POST',body:JSON.stringify({username:signinUsername,password:signinPassword}),headers:{'Content-type':'application/json; charset=UTF-8'}};fetch('https://music-pwa-api.iran.liara.run/api/users/sign-in',option).then(function(res){return res.json();}).then(function(data){if(data.token){var d=new Date();d.setTime(d.getTime()+90*24*60*60*1000);var expires=\"expires=\"+d.toUTCString();document.cookie=\"jwtToken=\".concat(data.token,\";\").concat(expires,\";path=/\");if(data.userRole==='admin'){navigate('/adminprofile');}else if(data.userRole==='user'){navigate('/userprofile');}}});};return/*#__PURE__*/_jsx(\"div\",{className:\"form-holder\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"chk\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"div\",{className:\"signup\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{for:\"chk\",className:\"form-label\",\"aria-hidden\":\"true\",children:\"\\u0639\\u0636\\u0648\\u06CC\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",onChange:function onChange(e){setSignupUsername(e.target.value);},placeholder:\"\\u0646\\u0627\\u0645 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\",required:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-input\",onChange:function onChange(e){setSignupEmail(e.target.value);},placeholder:\"\\u0627\\u06CC\\u0645\\u06CC\\u0644\",required:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",onChange:function onChange(e){setSignupPassword(e.target.value);},placeholder:\"\\u067E\\u0633\\u0648\\u0631\\u062F\",required:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",onChange:function onChange(e){setSignupRePassword(e.target.value);},placeholder:\"\\u062A\\u06A9\\u0631\\u0627\\u0631 \\u067E\\u0633\\u0648\\u0631\\u062F\",required:\"\"}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",onClick:function onClick(e){return onSignup(e);},children:\"\\u0639\\u0636\\u0648\\u06CC\\u062A\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{for:\"chk\",className:\"form-label\",\"aria-hidden\":\"true\",children:\"\\u0648\\u0631\\u0648\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",onChange:function onChange(e){setSigninUsername(e.target.value);},placeholder:\"\\u0646\\u0627\\u0645 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\",required:\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",onChange:function onChange(e){setSigninPassword(e.target.value);},placeholder:\"\\u067E\\u0633\\u0648\\u0631\\u062F\",required:\"\"}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",onClick:function onClick(e){return onSignin(e);},children:\"\\u0648\\u0631\\u0648\\u062F\"})]})})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","LoginPage","signupUsername","setSignupUsername","signupEmail","setSignupEmail","signupPassword","setSignupPassword","signupRePassword","setSignupRePassword","signinUsername","setSigninUsername","signinPassword","setSigninPassword","navigate","onSignup","e","preventDefault","option","method","body","JSON","stringify","username","email","password","passwordConfirm","headers","fetch","then","res","json","data","console","log","onSignin","token","d","Date","setTime","getTime","expires","toUTCString","document","cookie","userRole","target","value"],"sources":["D:/github/music-pwa-frontend/src/pages/LoginPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router';\r\n\r\nconst LoginPage = () => {\r\n\r\n\r\n  const [signupUsername, setSignupUsername] = useState('');\r\n  const [signupEmail, setSignupEmail] = useState('');\r\n  const [signupPassword, setSignupPassword] = useState('');\r\n  const [signupRePassword, setSignupRePassword] = useState('');\r\n\r\n  const [signinUsername, setSigninUsername] = useState('');\r\n  const [signinPassword, setSigninPassword] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const onSignup = (e) => {\r\n    e.preventDefault();\r\n    const option = {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        username: signupUsername,\r\n        email: signupEmail,\r\n        password: signupPassword,\r\n        passwordConfirm: signupRePassword\r\n      }),\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      }\r\n    };\r\n\r\n    fetch('https://music-pwa-api.iran.liara.run/api/users/sign-up', option)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n  }\r\n\r\n  const onSignin = (e) => {\r\n    e.preventDefault();\r\n    const option = {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        username: signinUsername,\r\n        password: signinPassword\r\n      }),\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      }\r\n    };\r\n\r\n    fetch('https://music-pwa-api.iran.liara.run/api/users/sign-in', option)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.token) {\r\n          const d = new Date();\r\n          d.setTime(d.getTime() + (90 * 24 * 60 * 60 * 1000));\r\n          let expires = \"expires=\" + d.toUTCString();\r\n          document.cookie = `jwtToken=${data.token};${expires};path=/`;\r\n          if (data.userRole === 'admin') {\r\n            navigate('/adminprofile')\r\n          } else if (data.userRole === 'user') {\r\n            navigate('/userprofile')\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n  return (\r\n    <div className='form-holder'>\r\n      <div className=\"main\">\r\n        <input type=\"checkbox\" id=\"chk\" aria-hidden=\"true\" />\r\n        <div className=\"signup\">\r\n          <form>\r\n            <label for=\"chk\" className='form-label' aria-hidden=\"true\">عضویت</label>\r\n            <input type=\"text\" className='form-input' onChange={(e) => { setSignupUsername(e.target.value) }} placeholder=\"نام کاربری\" required=\"\" />\r\n            <input type=\"email\" className='form-input' onChange={(e) => { setSignupEmail(e.target.value) }} placeholder=\"ایمیل\" required=\"\" />\r\n            <input type=\"password\" className='form-input' onChange={(e) => { setSignupPassword(e.target.value) }} placeholder=\"پسورد\" required=\"\" />\r\n            <input type=\"password\" className='form-input' onChange={(e) => { setSignupRePassword(e.target.value) }} placeholder=\"تکرار پسورد\" required=\"\" />\r\n            <button className='form-button' onClick={(e) => onSignup(e)}>عضویت</button>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"login\">\r\n          <form>\r\n            <label for=\"chk\" className='form-label' aria-hidden=\"true\">ورود</label>\r\n            <input type=\"text\" className='form-input' onChange={(e) => { setSigninUsername(e.target.value) }} placeholder=\"نام کاربری\" required=\"\" />\r\n            <input type=\"password\" className='form-input' onChange={(e) => { setSigninPassword(e.target.value) }} placeholder=\"پسورد\" required=\"\" />\r\n            <button className='form-button' onClick={(e) => onSignin(e)}>ورود</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}