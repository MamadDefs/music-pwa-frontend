{"ast":null,"code":"import _slicedToArray from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import ShareRoundedIcon from'@mui/icons-material/ShareRounded';import Snackbar from'@mui/material/Snackbar';import MuiAlert from'@mui/material/Alert';import Stack from'@mui/material/Stack';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Alert=/*#__PURE__*/React.forwardRef(function Alert(props,ref){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,ref:ref,variant:\"filled\"},props));});var SinglePlayList=function SinglePlayList(_ref){var setMusicInfo=_ref.setMusicInfo,data=_ref.data,setData=_ref.setData;var param=useParams();var _useState=useState(),_useState2=_slicedToArray(_useState,2),playlistDetail=_useState2[0],setPlaylistDetail=_useState2[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),messageType=_useState6[0],setMessageType=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var deleteMusic=function deleteMusic(musicID){var jwtToken=document.cookie.split('=')[1];var option={method:'POST',body:JSON.stringify({playlistID:param===null||param===void 0?void 0:param['*'],musicID:musicID,jwtToken:jwtToken}),headers:{'Content-type':'application/json; charset=UTF-8'}};setLoading(true);fetch(\"https://music-pwa-api.iran.liara.run/api/playlists/delete-music\",option).then(function(res){return res.json();}).then(function(d){if(d!==null&&d!==void 0&&d.error){setError(d===null||d===void 0?void 0:d.message);}else{}fetchPlaylist();setLoading(false);});};var handleClick=function handleClick(){setOpen(true);};var handleClose=function handleClose(event,reason){if(reason==='clickaway'){return;}setOpen(false);};function getCurrentURL(){return window.location.href;}var fetchPlaylist=function fetchPlaylist(){var option={method:'POST',body:JSON.stringify({id:param===null||param===void 0?void 0:param['*']}),headers:{'Content-type':'application/json; charset=UTF-8'}};fetch('https://music-pwa-api.iran.liara.run/api/playlists/id/id',option).then(function(res){return res.json();}).then(function(d){setPlaylistDetail({title:d===null||d===void 0?void 0:d.title,user:d===null||d===void 0?void 0:d.user});setData(d===null||d===void 0?void 0:d.musics);});};useEffect(function(){fetchPlaylist();},[]);var copyToTheClipboard=function copyToTheClipboard(){navigator.clipboard.writeText(getCurrentURL()).then(function(){console.log('Async: Copying to clipboard was successful!');handleClick();setMessageType('success');setMessage('لینک اشتراک گذاری با موفقیت کپی');},function(err){console.error('Async: Could not copy text: ',err);handleClick();setMessageType('error');setMessage('خطا در کپی کردن');});};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content-holder\",style:{color:'white'},children:[/*#__PURE__*/_jsx(Snackbar,{open:open,autoHideDuration:6000,onClose:handleClose,children:/*#__PURE__*/_jsx(Alert,{onClose:handleClose,severity:messageType,sx:{position:'absolute',bottom:'0%',right:'0%',zIndex:100},children:message})}),/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"plylist-section-title\",children:[/*#__PURE__*/_jsx(ShareRoundedIcon,{onClick:function onClick(){return copyToTheClipboard();}}),playlistDetail===null||playlistDetail===void 0?void 0:playlistDetail.title]}),/*#__PURE__*/_jsx(\"div\",{className:\"music-section\",children:data===null||data===void 0?void 0:data.map(function(q,index){var _q$artist;return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"img\",{src:q===null||q===void 0?void 0:q.coverImagePath,alt:\"\",onClick:function onClick(){return setMusicInfo(q);},onDoubleClick:function onDoubleClick(){return deleteMusic(q===null||q===void 0?void 0:q._id);},className:\"song-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"song-name\",children:q===null||q===void 0?void 0:q.title}),/*#__PURE__*/_jsx(\"h4\",{className:\"artist-name\",children:q===null||q===void 0?void 0:(_q$artist=q.artist)===null||_q$artist===void 0?void 0:_q$artist.map(function(r){return r+\" \";})})]},index);})})]});};export default SinglePlayList;","map":{"version":3,"names":["React","useEffect","useState","useParams","ShareRoundedIcon","Snackbar","MuiAlert","Stack","Backdrop","CircularProgress","Alert","forwardRef","props","ref","SinglePlayList","setMusicInfo","data","setData","param","playlistDetail","setPlaylistDetail","open","setOpen","message","setMessage","messageType","setMessageType","loading","setLoading","deleteMusic","musicID","jwtToken","document","cookie","split","option","method","body","JSON","stringify","playlistID","headers","fetch","then","res","json","d","error","setError","fetchPlaylist","handleClick","handleClose","event","reason","getCurrentURL","window","location","href","id","title","user","musics","copyToTheClipboard","navigator","clipboard","writeText","console","log","err","color","position","bottom","right","zIndex","theme","drawer","map","q","index","coverImagePath","_id","artist","r"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/SinglePlayList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport ShareRoundedIcon from '@mui/icons-material/ShareRounded';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport Stack from '@mui/material/Stack';\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst Alert = React.forwardRef(function Alert(props, ref) {\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst SinglePlayList = ({ setMusicInfo, data, setData }) => {\n    const param = useParams()\n    const [playlistDetail, setPlaylistDetail] = useState();\n    const [open, setOpen] = React.useState(false);\n    const [message, setMessage] = useState('');\n    const [messageType, setMessageType] = useState('');\n    const [loading, setLoading] = useState(false)\n\n    const deleteMusic = (musicID) => {\n        const jwtToken = document.cookie.split('=')[1];\n        const option = {\n          method: 'POST',\n          body: JSON.stringify({\n            playlistID:param?.['*'],\n            musicID,\n            jwtToken\n          }),\n          headers: {\n            'Content-type': 'application/json; charset=UTF-8',\n          }\n        };\n        setLoading(true);\n        fetch(`https://music-pwa-api.iran.liara.run/api/playlists/delete-music`, option)\n          .then((res) => res.json())\n          .then((d) => {\n            if (d?.error) {\n              setError(d?.message)\n            } else {        \n            }\n            fetchPlaylist();\n            setLoading(false);\n          })\n      }\n\n    const handleClick = () => {\n        setOpen(true);\n    };\n\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpen(false);\n    }\n\n\n    function getCurrentURL() {\n        return window.location.href\n    }\n\n    const fetchPlaylist=()=>{\n        const option = {\n            method: 'POST',\n            body: JSON.stringify({\n                id: param?.['*']\n            }),\n            headers: {\n                'Content-type': 'application/json; charset=UTF-8',\n            }\n        };\n\n        fetch('https://music-pwa-api.iran.liara.run/api/playlists/id/id', option)\n            .then((res) => res.json())\n            .then((d) => {\n                setPlaylistDetail({ title: d?.title, user: d?.user });\n                setData(d?.musics);\n            })\n\n    }\n\n    useEffect(() => {\n        fetchPlaylist();\n    }, [])\n\n    const copyToTheClipboard = () => {\n        navigator.clipboard.writeText(getCurrentURL()).then(function () {\n            console.log('Async: Copying to clipboard was successful!');\n            handleClick();\n            setMessageType('success');\n            setMessage('لینک اشتراک گذاری با موفقیت کپی');\n        }, function (err) {\n            console.error('Async: Could not copy text: ', err);\n            handleClick();\n            setMessageType('error');\n            setMessage('خطا در کپی کردن');\n        });\n    }\n\n    return (\n        <div className=\"page-content-holder\" style={{ color: 'white' }}>\n            <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\n                <Alert onClose={handleClose} severity={messageType} sx={{ position: 'absolute', bottom: '0%', right: '0%', zIndex: 100 }}>\n                    {message}\n                </Alert>\n            </Snackbar>\n            <Backdrop\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open={loading}\n            >\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n            <h2 className=\"plylist-section-title\"><ShareRoundedIcon onClick={() => copyToTheClipboard()} />{playlistDetail?.title}</h2>\n            <div className=\"music-section\">\n                {data?.map((q, index) => {\n                    return (\n                        <div key={index} className=\"post\">\n                            <img src={q?.coverImagePath} alt=\"\"  onClick={() => setMusicInfo(q)}  onDoubleClick={()=>deleteMusic(q?._id)} className=\"song-image\" />\n                            <h3 className=\"song-name\">{q?.title}</h3>\n                            <h4 className=\"artist-name\">{q?.artist?.map(r => { return (r + \" \") })}</h4>\n                        </div>\n                    )\n                })}\n            </div>\n        </div>\n    )\n}\n\nexport default SinglePlayList"],"mappings":"iRAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAOC,iBAAgB,KAAM,kCAAkC,CAC/D,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,SAAQ,KAAM,qBAAqB,CAC1C,MAAOC,MAAK,KAAM,qBAAqB,CACvC,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,iBAAgB,KAAM,gCAAgC,CAAC,wFAE9D,GAAMC,MAAK,cAAGV,KAAK,CAACW,UAAU,CAAC,QAASD,MAAK,CAACE,KAAK,CAAEC,GAAG,CAAE,CACtD,mBAAO,KAAC,QAAQ,gBAAC,SAAS,CAAE,CAAE,CAAC,GAAG,CAAEA,GAAI,CAAC,OAAO,CAAC,QAAQ,EAAKD,KAAK,EAAI,CAC3E,CAAC,CAAC,CAEF,GAAME,eAAc,CAAG,QAAjBA,eAAc,MAAwC,IAAlCC,aAAY,MAAZA,YAAY,CAAEC,IAAI,MAAJA,IAAI,CAAEC,OAAO,MAAPA,OAAO,CACjD,GAAMC,MAAK,CAAGf,SAAS,EAAE,CACzB,cAA4CD,QAAQ,EAAE,wCAA/CiB,cAAc,eAAEC,iBAAiB,eACxC,oBAAwBpB,KAAK,CAACE,QAAQ,CAAC,KAAK,CAAC,oDAAtCmB,IAAI,qBAAEC,OAAO,qBACpB,eAA8BpB,QAAQ,CAAC,EAAE,CAAC,yCAAnCqB,OAAO,eAAEC,UAAU,eAC1B,eAAsCtB,QAAQ,CAAC,EAAE,CAAC,yCAA3CuB,WAAW,eAAEC,cAAc,eAClC,eAA8BxB,QAAQ,CAAC,KAAK,CAAC,yCAAtCyB,OAAO,eAAEC,UAAU,eAE1B,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,OAAO,CAAK,CAC7B,GAAMC,SAAQ,CAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC9C,GAAMC,OAAM,CAAG,CACbC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,UAAU,CAACtB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAG,GAAG,CAAC,CACvBY,OAAO,CAAPA,OAAO,CACPC,QAAQ,CAARA,QACF,CAAC,CAAC,CACFU,OAAO,CAAE,CACP,cAAc,CAAE,iCAClB,CACF,CAAC,CACDb,UAAU,CAAC,IAAI,CAAC,CAChBc,KAAK,mEAAoEP,MAAM,CAAC,CAC7EQ,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,CAAC,CAAK,CACX,GAAIA,CAAC,SAADA,CAAC,WAADA,CAAC,CAAEC,KAAK,CAAE,CACZC,QAAQ,CAACF,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEvB,OAAO,CAAC,CACtB,CAAC,IAAM,CACP,CACA0B,aAAa,EAAE,CACfrB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAEH,GAAMsB,YAAW,CAAG,QAAdA,YAAW,EAAS,CACtB5B,OAAO,CAAC,IAAI,CAAC,CACjB,CAAC,CAED,GAAM6B,YAAW,CAAG,QAAdA,YAAW,CAAIC,KAAK,CAAEC,MAAM,CAAK,CACnC,GAAIA,MAAM,GAAK,WAAW,CAAE,CACxB,OACJ,CACA/B,OAAO,CAAC,KAAK,CAAC,CAClB,CAAC,CAGD,QAASgC,cAAa,EAAG,CACrB,MAAOC,OAAM,CAACC,QAAQ,CAACC,IAAI,CAC/B,CAEA,GAAMR,cAAa,CAAC,QAAdA,cAAa,EAAK,CACpB,GAAMd,OAAM,CAAG,CACXC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBmB,EAAE,CAAExC,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAG,GAAG,CACnB,CAAC,CAAC,CACFuB,OAAO,CAAE,CACL,cAAc,CAAE,iCACpB,CACJ,CAAC,CAEDC,KAAK,CAAC,0DAA0D,CAAEP,MAAM,CAAC,CACpEQ,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,CAAC,CAAK,CACT1B,iBAAiB,CAAC,CAAEuC,KAAK,CAAEb,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEa,KAAK,CAAEC,IAAI,CAAEd,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEc,IAAK,CAAC,CAAC,CACrD3C,OAAO,CAAC6B,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEe,MAAM,CAAC,CACtB,CAAC,CAAC,CAEV,CAAC,CAED5D,SAAS,CAAC,UAAM,CACZgD,aAAa,EAAE,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMa,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC7BC,SAAS,CAACC,SAAS,CAACC,SAAS,CAACX,aAAa,EAAE,CAAC,CAACX,IAAI,CAAC,UAAY,CAC5DuB,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC,CAC1DjB,WAAW,EAAE,CACbxB,cAAc,CAAC,SAAS,CAAC,CACzBF,UAAU,CAAC,iCAAiC,CAAC,CACjD,CAAC,CAAE,SAAU4C,GAAG,CAAE,CACdF,OAAO,CAACnB,KAAK,CAAC,8BAA8B,CAAEqB,GAAG,CAAC,CAClDlB,WAAW,EAAE,CACbxB,cAAc,CAAC,OAAO,CAAC,CACvBF,UAAU,CAAC,iBAAiB,CAAC,CACjC,CAAC,CAAC,CACN,CAAC,CAED,mBACI,aAAK,SAAS,CAAC,qBAAqB,CAAC,KAAK,CAAE,CAAE6C,KAAK,CAAE,OAAQ,CAAE,wBAC3D,KAAC,QAAQ,EAAC,IAAI,CAAEhD,IAAK,CAAC,gBAAgB,CAAE,IAAK,CAAC,OAAO,CAAE8B,WAAY,uBAC/D,KAAC,KAAK,EAAC,OAAO,CAAEA,WAAY,CAAC,QAAQ,CAAE1B,WAAY,CAAC,EAAE,CAAE,CAAE6C,QAAQ,CAAE,UAAU,CAAEC,MAAM,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,MAAM,CAAE,GAAI,CAAE,UACpHlD,OAAO,EACJ,EACD,cACX,KAAC,QAAQ,EACL,EAAE,CAAE,CAAE8C,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,gBAACC,KAAK,QAAKA,MAAK,CAACD,MAAM,CAACE,MAAM,CAAG,CAAC,EAAC,CAAE,CAClE,IAAI,CAAEhD,OAAQ,uBAEd,KAAC,gBAAgB,EAAC,KAAK,CAAC,SAAS,EAAG,EAC7B,cACX,YAAI,SAAS,CAAC,uBAAuB,wBAAC,KAAC,gBAAgB,EAAC,OAAO,CAAE,yBAAMmC,mBAAkB,EAAE,EAAC,EAAG,CAAC3C,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEwC,KAAK,GAAM,cAC3H,YAAK,SAAS,CAAC,eAAe,UACzB3C,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4D,GAAG,CAAC,SAACC,CAAC,CAAEC,KAAK,CAAK,eACrB,mBACI,aAAiB,SAAS,CAAC,MAAM,wBAC7B,YAAK,GAAG,CAAED,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEE,cAAe,CAAC,GAAG,CAAC,EAAE,CAAE,OAAO,CAAE,yBAAMhE,aAAY,CAAC8D,CAAC,CAAC,EAAC,CAAE,aAAa,CAAE,+BAAIhD,YAAW,CAACgD,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEG,GAAG,CAAC,EAAC,CAAC,SAAS,CAAC,YAAY,EAAG,cACvI,WAAI,SAAS,CAAC,WAAW,UAAEH,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAElB,KAAK,EAAM,cACzC,WAAI,SAAS,CAAC,aAAa,UAAEkB,CAAC,SAADA,CAAC,4BAADA,CAAC,CAAEI,MAAM,oCAAT,UAAWL,GAAG,CAAC,SAAAM,CAAC,CAAI,CAAE,MAAQA,EAAC,CAAG,GAAG,CAAE,CAAC,CAAC,EAAM,GAHtEJ,KAAK,CAIT,CAEd,CAAC,CAAC,EACA,GACJ,CAEd,CAAC,CAED,cAAehE,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}