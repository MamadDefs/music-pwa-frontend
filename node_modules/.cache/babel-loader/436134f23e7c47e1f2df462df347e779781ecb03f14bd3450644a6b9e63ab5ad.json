{"ast":null,"code":"import _slicedToArray from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./PlayListListView.css';import LoadingOval from'../LoadingOval/LoadingOval';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import{Link}from'react-router-dom';import AddCircleOutlineRoundedIcon from'@mui/icons-material/AddCircleOutlineRounded';import Modal from'@mui/material/Modal';import Box from'@mui/material/Box';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import{Typography}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var style={position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',width:'90%',bgcolor:'background.paper',border:'2px solid #000',boxShadow:24,p:4,borderRadius:'0.75rem',display:'flex',flexDirection:'column',justifyContent:'space-between',alignItem:'center','*':{marginTop:'8px'}};var PlayListListView=function PlayListListView(_ref){var userInfo=_ref.userInfo,setMusicInfo=_ref.setMusicInfo,data=_ref.data,setData=_ref.setData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),playlists=_useState4[0],setPlaylists=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModal=_useState6[0],setShowModal=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),formTitle=_useState8[0],setFormTitle=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var openModal=function openModal(){setShowModal(true);};var closeModal=function closeModal(){setShowModal(false);setError('');};var changeTitle=function changeTitle(e){setFormTitle(e.target.value);};var createPlaylist=function createPlaylist(){var jwtToken=document.cookie.split('=')[1];var option={method:'POST',body:JSON.stringify({title:formTitle,jwtToken:jwtToken}),headers:{'Content-type':'application/json; charset=UTF-8'}};fetch(\"https://music-pwa-api.iran.liara.run/api/playlists/create\",option).then(function(res){return res.json();}).then(function(d){if(d!==null&&d!==void 0&&d.error){setError(d===null||d===void 0?void 0:d.message);}else{closeModal();}});};useEffect(function(){var jwtToken=document.cookie.split('=')[1];var option={method:'POST',body:JSON.stringify({jwtToken:jwtToken}),headers:{'Content-type':'application/json; charset=UTF-8'}};setLoading(true);fetch(\"https://music-pwa-api.iran.liara.run/api/playlists\",option).then(function(res){return res.json();}).then(function(d){setPlaylists(d===null||d===void 0?void 0:d.playlists);setLoading(false);});},[showModal]);return/*#__PURE__*/_jsxs(\"div\",{className:\"playlistListHolder\",children:[/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsx(Modal,{open:showModal,onClose:closeModal,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[error?/*#__PURE__*/_jsx(Typography,{id:\"modal-modal-title\",sx:{color:'red'},variant:\"h6\",component:\"h2\",children:error}):'',/*#__PURE__*/_jsx(Typography,{id:\"modal-modal-title\",variant:\"h6\",component:\"h2\",children:\"\\u0627\\u06CC\\u062C\\u0627\\u062F \\u067E\\u0644\\u06CC \\u0644\\u06CC\\u0633\\u062A \\u062C\\u062F\\u06CC\\u062F\"}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",onChange:function onChange(e){return changeTitle(e);},label:\"\\u0646\\u0627\\u0645 \\u067E\\u0644\\u06CC \\u0644\\u06CC\\u0633\\u062A\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return createPlaylist();},children:\"\\u0627\\u06CC\\u062C\\u0627\\u062F\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-playlist-btn\",onClick:function onClick(){return openModal();},children:[/*#__PURE__*/_jsx(AddCircleOutlineRoundedIcon,{sx:{color:'white',fontSize:'35px'}}),\"\\u0627\\u0636\\u0627\\u0641\\u0647 \\u06A9\\u0631\\u062F\\u0646\"]}),playlists?playlists===null||playlists===void 0?void 0:playlists.map(function(playlist){var _playlist$musics;return/*#__PURE__*/_jsx(Link,{to:\"/playlist\".concat(playlist!==null&&playlist!==void 0&&playlist._id?\"/\".concat(playlist===null||playlist===void 0?void 0:playlist._id):''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"single-playlist-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:playlist===null||playlist===void 0?void 0:playlist.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \\u062A\\u0639\\u062F\\u0627\\u062F \\u0622\\u0647\\u0646\\u06AF \\u0647\\u0627 : \",playlist===null||playlist===void 0?void 0:(_playlist$musics=playlist.musics)===null||_playlist$musics===void 0?void 0:_playlist$musics.length]})]})});}):/*#__PURE__*/_jsx(\"p\",{style:{color:'white',margin:'auto',width:'50%'},children:\"\\u0634\\u0645\\u0627 \\u0647\\u0646\\u0648\\u0632 \\u067E\\u0644\\u06CC \\u0644\\u06CC\\u0633\\u062A\\u06CC \\u0646\\u062F\\u0627\\u0631\\u06CC\\u062F\"})]});};export default PlayListListView;","map":{"version":3,"names":["React","useState","useEffect","LoadingOval","Backdrop","CircularProgress","Link","AddCircleOutlineRoundedIcon","Modal","Box","Button","TextField","Typography","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","borderRadius","display","flexDirection","justifyContent","alignItem","marginTop","PlayListListView","userInfo","setMusicInfo","data","setData","loading","setLoading","playlists","setPlaylists","showModal","setShowModal","formTitle","setFormTitle","error","setError","openModal","closeModal","changeTitle","e","target","value","createPlaylist","jwtToken","document","cookie","split","option","method","body","JSON","stringify","title","headers","fetch","then","res","json","d","message","color","zIndex","theme","drawer","fontSize","map","playlist","_id","musics","length","margin"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/componenets/PlayListListView/PlayListListView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './PlayListListView.css'\nimport LoadingOval from '../LoadingOval/LoadingOval'\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Link } from 'react-router-dom';\nimport AddCircleOutlineRoundedIcon from '@mui/icons-material/AddCircleOutlineRounded';\nimport Modal from '@mui/material/Modal';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { Typography } from '@mui/material';\n\nconst style = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: '90%',\n  bgcolor: 'background.paper',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 4,\n  borderRadius:'0.75rem',\n  display:'flex',\n  flexDirection:'column',\n  justifyContent:'space-between',\n  alignItem:'center',\n  '*':{\n    marginTop:'8px'\n    }\n};\n\nconst PlayListListView = ({ userInfo, setMusicInfo, data, setData }) => {\n\n  const [loading, setLoading] = useState(false)\n  const [playlists, setPlaylists] = useState()\n  const [showModal, setShowModal] = useState(false);\n  const [formTitle,setFormTitle]=useState('');\n  const [error,setError]=useState('')\n\n  const openModal = () => { setShowModal(true) }\n  const closeModal = () => { setShowModal(false); setError(''); }\n  const changeTitle=(e)=>{\n    setFormTitle(e.target.value)\n  }\n  const createPlaylist=()=>{\n    const jwtToken = document.cookie.split('=')[1];\n    const option = {\n      method: 'POST',\n      body: JSON.stringify({\n        title:formTitle,\n        jwtToken\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n      }\n    };\n    fetch(`https://music-pwa-api.iran.liara.run/api/playlists/create`, option)\n      .then((res) => res.json())\n      .then((d) => {\n        if(d?.error){\n          setError(d?.message)\n        } else {\n          closeModal();\n        }\n      })\n  }\n\n\n  useEffect(() => {\n    const jwtToken = document.cookie.split('=')[1];\n    const option = {\n      method: 'POST',\n      body: JSON.stringify({\n        jwtToken\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n      }\n    };\n    setLoading(true);\n    fetch(`https://music-pwa-api.iran.liara.run/api/playlists`, option)\n      .then((res) => res.json())\n      .then((d) => {\n        setPlaylists(d?.playlists);\n        setLoading(false);\n      })\n\n  }, [showModal]);\n  return (\n    <div className='playlistListHolder'>\n      <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={loading}\n      >\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <Modal\n        open={showModal}\n        onClose={closeModal}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n        <Box sx={style}>\n          {error ? <Typography id=\"modal-modal-title\" sx={{color:'red'}} variant=\"h6\" component=\"h2\">\n            {error}\n          </Typography> : ''}\n          <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n            ایجاد پلی لیست جدید\n          </Typography>\n          <TextField id=\"outlined-basic\" onChange={(e)=>changeTitle(e)} label=\"نام پلی لیست\" variant=\"outlined\" />\n          <Button variant=\"contained\" onClick={()=>createPlaylist()}>ایجاد</Button>\n        </Box>\n      </Modal>\n\n      <div className='create-playlist-btn' onClick={() => openModal()}>\n        <AddCircleOutlineRoundedIcon sx={{ color: 'white', fontSize: '35px' }} />\n        اضافه کردن\n      </div>\n      {playlists ?\n        playlists?.map((playlist) => {\n          return (\n            <Link to={`/playlist${playlist?._id ? `/${playlist?._id}` : ''}`}>\n              <div className='single-playlist-item'>\n                <p>{playlist?.title}</p>\n                <p> تعداد آهنگ ها : {playlist?.musics?.length}</p>\n              </div>\n            </Link>\n          )\n        })\n        : <p style={{ color: 'white', margin: 'auto', width: '50%' }}>شما هنوز پلی لیستی ندارید</p>}\n    </div>\n  )\n}\n\nexport default PlayListListView"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}