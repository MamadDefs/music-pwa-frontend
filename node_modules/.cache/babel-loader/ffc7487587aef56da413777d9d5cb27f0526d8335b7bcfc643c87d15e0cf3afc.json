{"ast":null,"code":"import _slicedToArray from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import NeedToLogin from'../componenets/NeedToLogin/NeedToLogin';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UploadProfile=function UploadProfile(_ref){var userInfo=_ref.userInfo;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var onChangeFile=function onChangeFile(e){setFile(e.target.files[0]);};var onSubmit=function onSubmit(){var jwtToken=document.cookie.split('=')[1];var formData=new FormData();formData.append(\"profileImage\",file);formData.append(\"jwtToken\",jwtToken);try{setLoading(true);var res=axios.post(\"https://music-pwa-api.iran.liara.run/api/users/profile/upload-image\",formData).then(function(res){}).then(function(data){setLoading(false);navigate('/uploadprofile');});}catch(ex){setLoading(false);}};if(!userInfo)return/*#__PURE__*/_jsx(NeedToLogin,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content-holder\",children:[/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"uploadprofile-holder\",children:[/*#__PURE__*/_jsx(\"img\",{src:userInfo!==null&&userInfo!==void 0&&userInfo.profileImage?userInfo===null||userInfo===void 0?void 0:userInfo.profileImage:'',className:\"profileImage\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0639\\u06A9\\u0633 \\u067E\\u0631\\u0648\\u0641\\u0627\\u06CC\\u0644 \\u062C\\u062F\\u06CC\\u062F \\u0631\\u0627 \\u0622\\u067E\\u0644\\u0648\\u062F \\u06A9\\u0646\\u06CC\\u062F\"}),/*#__PURE__*/_jsx(\"form\",{action:\"/users/profile/upload-image\",method:\"post\",encType:\"multipart/form-data\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"profileImage\",onChange:function onChange(e){return onChangeFile(e);}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submitBtn\",value:\"submit\",onClick:function onClick(){return onSubmit();},children:\"\\u0622\\u067E\\u0644\\u0648\\u062F\"})]})]});};export default UploadProfile;","map":{"version":3,"names":["React","useState","axios","useNavigate","Backdrop","CircularProgress","NeedToLogin","UploadProfile","userInfo","navigate","file","setFile","loading","setLoading","onChangeFile","e","target","files","onSubmit","jwtToken","document","cookie","split","formData","FormData","append","res","post","then","data","ex","color","zIndex","theme","drawer","profileImage"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/UploadProfile.jsx"],"sourcesContent":["import React,{useState} from 'react'\nimport axios from 'axios';\nimport { useNavigate } from 'react-router';\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport NeedToLogin from '../componenets/NeedToLogin/NeedToLogin'\n\nconst UploadProfile = ({ userInfo }) => {\n\n    const navigate = useNavigate();\n    const [file, setFile] = useState(null);\n    const [loading, setLoading] = useState(false)\n\n    const onChangeFile = (e) => {\n        setFile(e.target.files[0])\n    }\n\n    const onSubmit = () => {\n        const jwtToken = document.cookie.split('=')[1];\n\n        const formData = new FormData();\n        formData.append(\"profileImage\", file);\n        formData.append(\"jwtToken\", jwtToken);\n        try {\n            setLoading(true);\n            const res = axios.post(\n                \"https://music-pwa-api.iran.liara.run/api/users/profile/upload-image\",\n                formData\n            ).then((res) => { })\n            .then((data) => {\n                setLoading(false);\n                navigate('/uploadprofile')\n            });\n        } catch (ex) {\n            setLoading(false);\n        }\n\n    }\n    if(!userInfo) return(<NeedToLogin />)\n    return (\n        <div className=\"page-content-holder\">\n             <Backdrop\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open={loading}\n            >\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n            <div className='uploadprofile-holder'>\n                <img src={userInfo?.profileImage ? userInfo?.profileImage : ''} className='profileImage' />\n                <h3>عکس پروفایل جدید را آپلود کنید</h3>\n                <form action=\"/users/profile/upload-image\" method=\"post\" encType=\"multipart/form-data\">\n                    <input type=\"file\" name=\"profileImage\" onChange={(e) => onChangeFile(e)} />\n                </form>\n                <button type=\"submit\" className='submitBtn' value=\"submit\" onClick={() => onSubmit()} >آپلود</button>\n            </div>\n        </div>\n    )\n}\n\nexport default UploadProfile"],"mappings":"yIAAA,MAAOA,MAAK,EAAEC,QAAQ,KAAO,OAAO,CACpC,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,cAAc,CAC1C,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,iBAAgB,KAAM,gCAAgC,CAC7D,MAAOC,YAAW,KAAM,wCAAwC,yFAEhE,GAAMC,cAAa,CAAG,QAAhBA,cAAa,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CAE7B,GAAMC,SAAQ,CAAGN,WAAW,EAAE,CAC9B,cAAwBF,QAAQ,CAAC,IAAI,CAAC,wCAA/BS,IAAI,eAAEC,OAAO,eACpB,eAA8BV,QAAQ,CAAC,KAAK,CAAC,yCAAtCW,OAAO,eAAEC,UAAU,eAE1B,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CACxBJ,OAAO,CAACI,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC9B,CAAC,CAED,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACnB,GAAMC,SAAQ,CAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAE9C,GAAMC,SAAQ,CAAG,GAAIC,SAAQ,EAAE,CAC/BD,QAAQ,CAACE,MAAM,CAAC,cAAc,CAAEf,IAAI,CAAC,CACrCa,QAAQ,CAACE,MAAM,CAAC,UAAU,CAAEN,QAAQ,CAAC,CACrC,GAAI,CACAN,UAAU,CAAC,IAAI,CAAC,CAChB,GAAMa,IAAG,CAAGxB,KAAK,CAACyB,IAAI,CAClB,qEAAqE,CACrEJ,QAAQ,CACX,CAACK,IAAI,CAAC,SAACF,GAAG,CAAK,CAAE,CAAC,CAAC,CACnBE,IAAI,CAAC,SAACC,IAAI,CAAK,CACZhB,UAAU,CAAC,KAAK,CAAC,CACjBJ,QAAQ,CAAC,gBAAgB,CAAC,CAC9B,CAAC,CAAC,CACN,CAAE,MAAOqB,EAAE,CAAE,CACTjB,UAAU,CAAC,KAAK,CAAC,CACrB,CAEJ,CAAC,CACD,GAAG,CAACL,QAAQ,CAAE,mBAAO,KAAC,WAAW,IAAG,CACpC,mBACI,aAAK,SAAS,CAAC,qBAAqB,wBAC/B,KAAC,QAAQ,EACN,EAAE,CAAE,CAAEuB,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,gBAACC,KAAK,QAAKA,MAAK,CAACD,MAAM,CAACE,MAAM,CAAG,CAAC,EAAC,CAAE,CAClE,IAAI,CAAEtB,OAAQ,uBAEd,KAAC,gBAAgB,EAAC,KAAK,CAAC,SAAS,EAAG,EAC7B,cACX,aAAK,SAAS,CAAC,sBAAsB,wBACjC,YAAK,GAAG,CAAEJ,QAAQ,SAARA,QAAQ,WAARA,QAAQ,CAAE2B,YAAY,CAAG3B,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAE2B,YAAY,CAAG,EAAG,CAAC,SAAS,CAAC,cAAc,EAAG,cAC3F,oBAAI,6JAA8B,EAAK,cACvC,aAAM,MAAM,CAAC,6BAA6B,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,qBAAqB,uBAClF,cAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAE,kBAACpB,CAAC,QAAKD,aAAY,CAACC,CAAC,CAAC,EAAC,EAAG,EACxE,cACP,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAE,yBAAMG,SAAQ,EAAE,EAAC,UAAE,gCAAK,EAAS,GACnG,GACJ,CAEd,CAAC,CAED,cAAeX,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}