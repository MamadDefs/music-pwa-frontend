{"ast":null,"code":"import _slicedToArray from\"D:/github/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var usernameChange=function usernameChange(e){setUsername(e.target.value);};var passwordChange=function passwordChange(e){setPassword(e.target.value);};var onClick=function onClick(){var option={method:'POST',body:JSON.stringify({username:username,password:password}),headers:{'Content-type':'application/json; charset=UTF-8'}};fetch('https://music-pwa-api.iran.liara.run/api/users/sign-in',option).then(function(res){return res.json();}).then(function(data){if(data.token){var d=new Date();d.setTime(d.getTime()+90*24*60*60*1000);var expires=\"expires=\"+d.toUTCString();document.cookie=\"jwtToken=\".concat(data.token,\";\").concat(expires,\";path=/\");if(data.userRole==='admin'){location.replace('/adminprofile');}else if(data.userRole==='user'){location.replace('/userprofile');}}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-holder\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0646\\u0627\\u0645 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\",onChange:function onChange(e){return usernameChange(e);},value:username}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\",onChange:function onChange(e){return passwordChange(e);},value:password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-btn\",onClick:onClick,children:\"\\u0648\\u0631\\u0648\\u062F\"})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","LoginForm","username","setUsername","password","setPassword","usernameChange","e","target","value","passwordChange","onClick","option","method","body","JSON","stringify","headers","fetch","then","res","json","data","token","d","Date","setTime","getTime","expires","toUTCString","document","cookie","userRole","location","replace"],"sources":["D:/github/music-pwa-frontend/src/componenets/LoginForm/LoginForm.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst LoginForm = () => {\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const usernameChange = (e) => {\r\n    setUsername(e.target.value);\r\n  }\r\n\r\n  const passwordChange = (e) => {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  const onClick = () => {\r\n\r\n    const option = {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        username,\r\n        password\r\n      }),\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      }\r\n    };\r\n\r\n    fetch('https://music-pwa-api.iran.liara.run/api/users/sign-in', option)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.token) {\r\n          const d = new Date();\r\n          d.setTime(d.getTime() + (90 * 24 * 60 * 60 * 1000));\r\n          let expires = \"expires=\" + d.toUTCString();\r\n          document.cookie = `jwtToken=${data.token};${expires};path=/`;\r\n          if (data.userRole === 'admin') {\r\n            location.replace('/adminprofile');\r\n          } else if (data.userRole === 'user') {\r\n            location.replace('/userprofile');\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <div className='form-holder'>\r\n      <form >\r\n        <input type=\"text\" placeholder=\"نام کاربری\" onChange={(e) => usernameChange(e)} value={username} />\r\n        <input type=\"password\" placeholder=\"رمز عبور\" onChange={(e) => passwordChange(e)} value={password} />\r\n      </form>\r\n      <button type=\"submit\" className='form-btn' onClick={onClick}>ورود</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm"],"mappings":"kHAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,yFAEvC,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CAEtB,cAAgCD,QAAQ,CAAC,EAAE,CAAC,wCAArCE,QAAQ,eAAEC,WAAW,eAC5B,eAAgCH,QAAQ,CAAC,EAAE,CAAC,yCAArCI,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIC,CAAC,CAAK,CAC5BJ,WAAW,CAACI,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAC,CAED,GAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIH,CAAC,CAAK,CAC5BF,WAAW,CAACE,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAC,CAED,GAAME,QAAO,CAAG,QAAVA,QAAO,EAAS,CAEpB,GAAMC,OAAM,CAAG,CACbC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBd,QAAQ,CAARA,QAAQ,CACRE,QAAQ,CAARA,QACF,CAAC,CAAC,CACFa,OAAO,CAAE,CACP,cAAc,CAAE,iCAClB,CACF,CAAC,CAEDC,KAAK,CAAC,wDAAwD,CAAEN,MAAM,CAAC,CACpEO,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAIA,IAAI,CAACC,KAAK,CAAE,CACd,GAAMC,EAAC,CAAG,GAAIC,KAAI,EAAE,CACpBD,CAAC,CAACE,OAAO,CAACF,CAAC,CAACG,OAAO,EAAE,CAAI,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAAK,CAAC,CACnD,GAAIC,QAAO,CAAG,UAAU,CAAGJ,CAAC,CAACK,WAAW,EAAE,CAC1CC,QAAQ,CAACC,MAAM,oBAAeT,IAAI,CAACC,KAAK,aAAIK,OAAO,WAAS,CAC5D,GAAIN,IAAI,CAACU,QAAQ,GAAK,OAAO,CAAE,CAC7BC,QAAQ,CAACC,OAAO,CAAC,eAAe,CAAC,CACnC,CAAC,IAAM,IAAIZ,IAAI,CAACU,QAAQ,GAAK,MAAM,CAAE,CACnCC,QAAQ,CAACC,OAAO,CAAC,cAAc,CAAC,CAClC,CACF,CAEF,CAAC,CAAC,CAGN,CAAC,CAGD,mBACE,aAAK,SAAS,CAAC,aAAa,wBAC1B,qCACE,cAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,yDAAY,CAAC,QAAQ,CAAE,kBAAC3B,CAAC,QAAKD,eAAc,CAACC,CAAC,CAAC,EAAC,CAAC,KAAK,CAAEL,QAAS,EAAG,cACnG,cAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,6CAAU,CAAC,QAAQ,CAAE,kBAACK,CAAC,QAAKG,eAAc,CAACH,CAAC,CAAC,EAAC,CAAC,KAAK,CAAEH,QAAS,EAAG,GAChG,cACP,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAEO,OAAQ,UAAC,0BAAI,EAAS,GACtE,CAEV,CAAC,CAED,cAAeV,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}