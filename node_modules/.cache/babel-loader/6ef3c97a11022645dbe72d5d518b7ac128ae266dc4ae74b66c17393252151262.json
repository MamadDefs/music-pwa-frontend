{"ast":null,"code":"var _jsxFileName = \"/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/Layout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Outlet, Link, useLocation, redirect } from \"react-router-dom\";\nimport AccountCircleOutlinedIcon from '@mui/icons-material/AccountCircleOutlined';\nimport QueueMusicOutlinedIcon from '@mui/icons-material/QueueMusicOutlined';\nimport SearchOutlinedIcon from '@mui/icons-material/SearchOutlined';\nimport HomeOutlinedIcon from '@mui/icons-material/HomeOutlined';\nimport MusicPlayer from '../componenets/MusicPlayer/MusicPlayer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Layout = _ref => {\n  _s();\n  let {\n    setMusicInfo,\n    musicInfo,\n    profileRoute,\n    setProfileRoute,\n    userInfo,\n    setUserInfo\n  } = _ref;\n  const location = useLocation();\n  useEffect(() => {\n    const jwtToken = document.cookie.split('=')[1];\n    const option = {\n      method: 'POST',\n      body: JSON.stringify({\n        jwtToken\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      }\n    };\n    fetch('https://music-pwa-api.iran.liara.run/api/users/auth', option).then(res => res.json()).then(data => {\n      if (jwtToken) {\n        if (data !== null && data !== void 0 && data.isLogin) {\n          var _data$user, _data$user2;\n          setUserInfo(data === null || data === void 0 ? void 0 : data.user);\n          if ((data === null || data === void 0 ? void 0 : (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user.role) == 'admin') {\n            setProfileRoute('/adminprofile');\n          } else if ((data === null || data === void 0 ? void 0 : (_data$user2 = data.user) === null || _data$user2 === void 0 ? void 0 : _data$user2.role) == 'user') {\n            setProfileRoute('/userprofile');\n          }\n        } else {\n          setProfileRoute(\"/login-signup\");\n        }\n      }\n    });\n  }, [location]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      id: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav-container-top\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: profileRoute,\n          className: \"nav__logo\",\n          children: userInfo === null || userInfo === void 0 ? void 0 : userInfo.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), userInfo !== null && userInfo !== void 0 && userInfo.profileImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: userInfo === null || userInfo === void 0 ? void 0 : userInfo.profileImage,\n          alt: \"\",\n          className: \"nav__img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 47\n        }, this) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"nav-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nav__menu\",\n          id: \"nav-menu\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"nav__list\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav__item\",\n                id: \"home-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nav__link\",\n                  children: [/*#__PURE__*/_jsxDEV(HomeOutlinedIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 61,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"nav__name\",\n                    children: \"\\u062E\\u0627\\u0646\\u0647\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 62,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/search\",\n              children: /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav__item\",\n                id: \"search-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nav__link\",\n                  children: [/*#__PURE__*/_jsxDEV(SearchOutlinedIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"nav__name\",\n                    children: \"\\u062C\\u0633\\u062A\\u062C\\u0648\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/playlist\",\n              children: /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav__item\",\n                id: \"playlist-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nav__link\",\n                  children: [/*#__PURE__*/_jsxDEV(QueueMusicOutlinedIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 77,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"nav__name\",\n                    children: \"\\u067E\\u0644\\u06CC \\u0644\\u06CC\\u0633\\u062A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 78,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: profileRoute,\n              children: /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav__item\",\n                id: \"profile-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nav__link\",\n                  children: [/*#__PURE__*/_jsxDEV(AccountCircleOutlinedIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"nav__name\",\n                    children: \"\\u062D\\u0633\\u0627\\u0628 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 87,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), musicInfo ? /*#__PURE__*/_jsxDEV(MusicPlayer, {\n      musicInfo: musicInfo,\n      setMusicInfo: setMusicInfo,\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 26\n    }, this) : '']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n_s(Layout, \"BXcZrDMM76mmm4zA8/QV5UbMNXE=\", false, function () {\n  return [useLocation];\n});\n_c = Layout;\nexport default Layout;\nvar _c;\n$RefreshReg$(_c, \"Layout\");","map":{"version":3,"names":["React","useState","useEffect","Outlet","Link","useLocation","redirect","AccountCircleOutlinedIcon","QueueMusicOutlinedIcon","SearchOutlinedIcon","HomeOutlinedIcon","MusicPlayer","Layout","setMusicInfo","musicInfo","profileRoute","setProfileRoute","userInfo","setUserInfo","location","jwtToken","document","cookie","split","option","method","body","JSON","stringify","headers","fetch","then","res","json","data","isLogin","user","role","username","profileImage"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/Layout.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Outlet, Link, useLocation, redirect } from \"react-router-dom\";\nimport AccountCircleOutlinedIcon from '@mui/icons-material/AccountCircleOutlined';\nimport QueueMusicOutlinedIcon from '@mui/icons-material/QueueMusicOutlined';\nimport SearchOutlinedIcon from '@mui/icons-material/SearchOutlined';\nimport HomeOutlinedIcon from '@mui/icons-material/HomeOutlined';\nimport MusicPlayer from '../componenets/MusicPlayer/MusicPlayer';\n\nconst Layout = ({ setMusicInfo,musicInfo,profileRoute, setProfileRoute, userInfo, setUserInfo }) => {\n\n\n    const location = useLocation();\n\n    useEffect(() => {\n\n        const jwtToken = document.cookie.split('=')[1];\n        const option = {\n            method: 'POST',\n            body: JSON.stringify({\n                jwtToken\n            }),\n            headers: {\n                'Content-type': 'application/json; charset=UTF-8',\n            }\n        };\n\n        fetch('https://music-pwa-api.iran.liara.run/api/users/auth', option)\n            .then((res) => res.json())\n            .then((data) => {\n                if (jwtToken) {\n                    if (data?.isLogin) {\n                        setUserInfo(data?.user)\n                        if (data?.user?.role == 'admin') {\n                            setProfileRoute('/adminprofile')\n                        } else if (data?.user?.role == 'user') {\n                            setProfileRoute('/userprofile')\n                        }\n                    } else {\n                        setProfileRoute(\"/login-signup\")\n                    }\n                }\n            })\n\n    }, [location])\n\n    \n\n    return (\n        <div>\n            <header className='header' id='header'>\n                <div className='nav-container-top'>\n                    <Link to={profileRoute} className=\"nav__logo\">{userInfo?.username}</Link>\n                    {userInfo?.profileImage ? <img src={userInfo?.profileImage} alt=\"\" className=\"nav__img\" /> : ''}\n                </div>\n                <nav className='nav-container'>\n                    <div className='nav__menu' id=\"nav-menu\">\n                        <ul className=\"nav__list\">\n                            <Link to=\"/\">\n                                <li className=\"nav__item\" id=\"home-btn\" >\n                                    <div className=\"nav__link\">\n                                        <HomeOutlinedIcon />\n                                        <span className=\"nav__name\">خانه</span>\n                                    </div>\n                                </li>\n                            </Link>\n                            <Link to=\"/search\">\n                                <li className=\"nav__item\" id=\"search-btn\">\n                                    <div className=\"nav__link\">\n                                        <SearchOutlinedIcon />\n                                        <span className=\"nav__name\">جستجو</span>\n                                    </div>\n                                </li>\n                            </Link>\n                            <Link to=\"/playlist\">\n                                <li className=\"nav__item\" id=\"playlist-btn\">\n                                    <div className=\"nav__link\">\n                                        <QueueMusicOutlinedIcon />\n                                        <span className=\"nav__name\">پلی لیست</span>\n                                    </div>\n                                </li>\n                            </Link>\n                            <Link to={profileRoute} >\n                                <li className=\"nav__item\" id=\"profile-btn\">\n                                    <div className=\"nav__link\">\n                                        {/* <i className='bx bx-user nav__icon'></i> */}\n                                        <AccountCircleOutlinedIcon />\n                                        <span className=\"nav__name\">حساب کاربری</span>\n                                    </div>\n                                </li>\n                            </Link>\n                        </ul>\n                    </div>\n                </nav>\n            </header>\n            <Outlet />\n            {musicInfo ? <MusicPlayer musicInfo={musicInfo} setMusicInfo={setMusicInfo} data={data} /> : ''}\n        </div>\n    )\n}\n\nexport default Layout"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}