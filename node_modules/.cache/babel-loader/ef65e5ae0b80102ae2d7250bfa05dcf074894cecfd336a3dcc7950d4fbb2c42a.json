{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Outlet,Link,useLocation,redirect}from\"react-router-dom\";import AccountCircleOutlinedIcon from'@mui/icons-material/AccountCircleOutlined';import QueueMusicOutlinedIcon from'@mui/icons-material/QueueMusicOutlined';import SearchOutlinedIcon from'@mui/icons-material/SearchOutlined';import HomeOutlinedIcon from'@mui/icons-material/HomeOutlined';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Layout=function Layout(_ref){var profileRoute=_ref.profileRoute,setProfileRoute=_ref.setProfileRoute,userInfo=_ref.userInfo,setUserInfo=_ref.setUserInfo;var location=useLocation();useEffect(function(){var jwtToken=document.cookie.split('=')[1];var option={method:'POST',body:JSON.stringify({jwtToken:jwtToken}),headers:{'Content-type':'application/json; charset=UTF-8'}};fetch('https://music-pwa-api.iran.liara.run/api/users/auth',option).then(function(res){return res.json();}).then(function(data){if(jwtToken){if(data!==null&&data!==void 0&&data.isLogin){var _data$user,_data$user2;setUserInfo(data===null||data===void 0?void 0:data.user);if((data===null||data===void 0?void 0:(_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.role)=='admin'){setProfileRoute('/adminprofile');}else if((data===null||data===void 0?void 0:(_data$user2=data.user)===null||_data$user2===void 0?void 0:_data$user2.role)=='user'){setProfileRoute('/userprofile');}}else{setProfileRoute(\"/login-signup\");}}});},[location]);var defaultProfileImageUrl=\"https://music-pwa-api.iran.liara.run/uploads/images/default.png\";return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",id:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container-top\",children:[/*#__PURE__*/_jsx(Link,{to:profileRoute,className:\"nav__logo\",children:userInfo===null||userInfo===void 0?void 0:userInfo.username}),/*#__PURE__*/_jsx(\"img\",{src:userInfo!==null&&userInfo!==void 0&&userInfo.profileImage?userInfo===null||userInfo===void 0?void 0:userInfo.profileImage:defaultProfileImageUrl,alt:\"\",className:\"nav__img\"})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"nav-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"nav__menu\",id:\"nav-menu\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav__list\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav__item\",id:\"home-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav__link\",children:[/*#__PURE__*/_jsx(HomeOutlinedIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"nav__name\",children:\"\\u062E\\u0627\\u0646\\u0647\"})]})})}),/*#__PURE__*/_jsx(Link,{to:\"/search\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav__item\",id:\"search-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav__link\",children:[/*#__PURE__*/_jsx(SearchOutlinedIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"nav__name\",children:\"\\u062C\\u0633\\u062A\\u062C\\u0648\"})]})})}),/*#__PURE__*/_jsx(Link,{to:\"/playlist\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav__item\",id:\"playlist-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav__link\",children:[/*#__PURE__*/_jsx(QueueMusicOutlinedIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"nav__name\",children:\"\\u067E\\u0644\\u06CC \\u0644\\u06CC\\u0633\\u062A\"})]})})}),/*#__PURE__*/_jsx(Link,{to:profileRoute,children:/*#__PURE__*/_jsx(\"li\",{className:\"nav__item\",id:\"profile-btn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav__link\",children:[/*#__PURE__*/_jsx(AccountCircleOutlinedIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"nav__name\",children:\"\\u062D\\u0633\\u0627\\u0628 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\"})]})})})]})})})]}),/*#__PURE__*/_jsx(Outlet,{})]});};export default Layout;","map":{"version":3,"names":["React","useState","useEffect","Outlet","Link","useLocation","redirect","AccountCircleOutlinedIcon","QueueMusicOutlinedIcon","SearchOutlinedIcon","HomeOutlinedIcon","Layout","profileRoute","setProfileRoute","userInfo","setUserInfo","location","jwtToken","document","cookie","split","option","method","body","JSON","stringify","headers","fetch","then","res","json","data","isLogin","user","role","defaultProfileImageUrl","username","profileImage"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/Layout.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Outlet, Link, useLocation, redirect } from \"react-router-dom\";\nimport AccountCircleOutlinedIcon from '@mui/icons-material/AccountCircleOutlined';\nimport QueueMusicOutlinedIcon from '@mui/icons-material/QueueMusicOutlined';\nimport SearchOutlinedIcon from '@mui/icons-material/SearchOutlined';\nimport HomeOutlinedIcon from '@mui/icons-material/HomeOutlined';\n\nconst Layout = ({ profileRoute, setProfileRoute, userInfo, setUserInfo }) => {\n\n\n    const location = useLocation();\n\n    useEffect(() => {\n\n        const jwtToken = document.cookie.split('=')[1];\n        const option = {\n            method: 'POST',\n            body: JSON.stringify({\n                jwtToken\n            }),\n            headers: {\n                'Content-type': 'application/json; charset=UTF-8',\n            }\n        };\n\n        fetch('https://music-pwa-api.iran.liara.run/api/users/auth', option)\n            .then((res) => res.json())\n            .then((data) => {\n                if (jwtToken) {\n                    if (data?.isLogin) {\n                        setUserInfo(data?.user)\n                        if (data?.user?.role == 'admin') {\n                            setProfileRoute('/adminprofile')\n                        } else if (data?.user?.role == 'user') {\n                            setProfileRoute('/userprofile')\n                        }\n                    } else {\n                        setProfileRoute(\"/login-signup\")\n                    }\n                }\n            })\n\n    }, [location])\n\n    const defaultProfileImageUrl = \"https://music-pwa-api.iran.liara.run/uploads/images/default.png\";\n\n    return (\n        <div>\n            <header className='header' id='header'>\n                <div className='nav-container-top'>\n                    <Link to={profileRoute} className=\"nav__logo\">{userInfo?.username}</Link>\n                    <img src={userInfo?.profileImage ? userInfo?.profileImage : defaultProfileImageUrl} alt=\"\" className=\"nav__img\" />\n                </div>\n                <nav className='nav-container'>\n                    <div className='nav__menu' id=\"nav-menu\">\n                        <ul className=\"nav__list\">\n                            <Link to=\"/\">\n                                <li className=\"nav__item\" id=\"home-btn\" >\n                                    <div className=\"nav__link\">\n                                        <HomeOutlinedIcon />\n                                        <span className=\"nav__name\">خانه</span>\n                                    </div>\n                                </li>\n                            </Link>\n                            <Link to=\"/search\">\n                                <li className=\"nav__item\" id=\"search-btn\">\n                                    <div className=\"nav__link\">\n                                        <SearchOutlinedIcon />\n                                        <span className=\"nav__name\">جستجو</span>\n                                    </div>\n                                </li>\n                            </Link>\n                            <Link to=\"/playlist\">\n                                <li className=\"nav__item\" id=\"playlist-btn\">\n                                    <div className=\"nav__link\">\n                                        <QueueMusicOutlinedIcon />\n                                        <span className=\"nav__name\">پلی لیست</span>\n                                    </div>\n                                </li>\n                            </Link>\n                            <Link to={profileRoute} >\n                                <li className=\"nav__item\" id=\"profile-btn\">\n                                    <div className=\"nav__link\">\n                                        {/* <i className='bx bx-user nav__icon'></i> */}\n                                        <AccountCircleOutlinedIcon />\n                                        <span className=\"nav__name\">حساب کاربری</span>\n                                    </div>\n                                </li>\n                            </Link>\n                        </ul>\n                    </div>\n                </nav>\n            </header>\n            <Outlet />\n        </div>\n    )\n}\n\nexport default Layout"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}