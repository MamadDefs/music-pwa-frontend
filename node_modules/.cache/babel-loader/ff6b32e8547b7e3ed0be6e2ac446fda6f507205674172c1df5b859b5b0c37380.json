{"ast":null,"code":"import _slicedToArray from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import NeedToLogin from'../componenets/NeedToLogin/NeedToLogin';import NoAccess from'../componenets/NoAccess/NoAccess';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UploadMusic=function UploadMusic(_ref){var userInfo=_ref.userInfo;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),desc=_useState6[0],setDesc=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),artist=_useState10[0],setArtist=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),coverImage=_useState12[0],setCoverImage=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),music=_useState14[0],setMusic=_useState14[1];var titleChange=function titleChange(e){setTitle(e.target.value);};var descChange=function descChange(e){setDesc(e.target.value);};var categoryChange=function categoryChange(e){setCategory(e.target.value);};var artistChange=function artistChange(e){setArtist(e.target.value);};var onChangeCoverImage=function onChangeCoverImage(e){setCoverImage(e.target.files[0]);};var onChangeMusic=function onChangeMusic(e){setMusic(e.target.files[0]);};var _onClick=function onClick(e){e.preventDefault();var jwtToken=document.cookie.split('=')[1];var formData=new FormData();formData.append(\"coverImage\",coverImage);formData.append(\"music\",music);formData.append(\"title\",title);formData.append(\"desc\",desc);formData.append(\"category\",category);formData.append(\"artist\",artist);formData.append(\"jwtToken\",jwtToken);try{setLoading(true);axios.post(\"https://music-pwa-api.iran.liara.run/api/musics/upload-music\",formData).then(function(res){}).then(function(data){setLoading(false);});}catch(ex){setLoading(false);}};if(!userInfo)return/*#__PURE__*/_jsx(NeedToLogin,{});if(!((userInfo===null||userInfo===void 0?void 0:userInfo.role)=='admin'))return/*#__PURE__*/_jsx(NoAccess,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"form-holder\",children:[/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"upload-music-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0646\\u0627\\u0645 \\u0622\\u0647\\u0646\\u06AF\",onChange:function onChange(e){return titleChange(e);},value:title}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u062A\\u0648\\u0636\\u06CC\\u062D\\u0627\\u062A \\u0622\\u0647\\u0646\\u06AF\",onChange:function onChange(e){return descChange(e);},value:desc}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u062F\\u0633\\u062A\\u0647 \\u0628\\u0646\\u062F\\u06CC\",onChange:function onChange(e){return categoryChange(e);},value:category}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u062E\\u0648\\u0627\\u0646\\u0646\\u062F\\u0647 \\u0647\\u0627\",onChange:function onChange(e){return artistChange(e);},value:artist}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0639\\u06A9\\u0633 \\u0622\\u0647\\u0646\\u06AF \\u0631\\u0627 \\u0622\\u067E\\u0644\\u0648\\u062F \\u06A9\\u0646\\u06CC\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"coverImage\",onChange:function onChange(e){return onChangeCoverImage(e);}}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0622\\u0647\\u0646\\u06AF \\u0631\\u0627 \\u0622\\u067E\\u0644\\u0648\\u062F \\u06A9\\u0646\\u06CC\\u062F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"music\",onChange:function onChange(e){return onChangeMusic(e);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-btn\",onClick:function onClick(e){return _onClick(e);},children:\"\\u0627\\u06CC\\u062C\\u0627\\u062F \\u0645\\u0648\\u0632\\u06CC\\u06A9\"})]})]});};export default UploadMusic;","map":{"version":3,"names":["React","useState","axios","Backdrop","CircularProgress","NeedToLogin","NoAccess","UploadMusic","userInfo","loading","setLoading","title","setTitle","desc","setDesc","category","setCategory","artist","setArtist","coverImage","setCoverImage","music","setMusic","titleChange","e","target","value","descChange","categoryChange","artistChange","onChangeCoverImage","files","onChangeMusic","onClick","preventDefault","jwtToken","document","cookie","split","formData","FormData","append","post","then","res","data","ex","role","color","zIndex","theme","drawer"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/UploadMusic.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios';\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport NeedToLogin from '../componenets/NeedToLogin/NeedToLogin'\nimport NoAccess from '../componenets/NoAccess/NoAccess'\n\n\nconst UploadMusic = ({userInfo}) => {\n\n\n    const [loading, setLoading] = useState(false)\n\n    const [title, setTitle] = useState('');\n    const [desc, setDesc] = useState('');\n    const [category, setCategory] = useState('');\n    const [artist, setArtist] = useState('');\n    const [coverImage, setCoverImage] = useState('');\n    const [music, setMusic] = useState('');\n\n    const titleChange = (e) => {\n        setTitle(e.target.value);\n    }\n\n    const descChange = (e) => {\n        setDesc(e.target.value);\n    }\n    const categoryChange = (e) => {\n        setCategory(e.target.value);\n    }\n    const artistChange = (e) => {\n        setArtist(e.target.value);\n    }\n    const onChangeCoverImage = (e) => {\n        setCoverImage(e.target.files[0]);\n    }\n    const onChangeMusic = (e) => {\n        setMusic(e.target.files[0]);\n    }\n\n    const onClick = (e) => {\n        e.preventDefault();\n        const jwtToken = document.cookie.split('=')[1];\n        const formData = new FormData();\n        formData.append(\"coverImage\", coverImage);\n        formData.append(\"music\", music);\n        formData.append(\"title\", title);\n        formData.append(\"desc\", desc);\n        formData.append(\"category\", category);\n        formData.append(\"artist\", artist);\n        formData.append(\"jwtToken\", jwtToken);\n        try {\n            setLoading(true);\n            axios.post(\n                \"https://music-pwa-api.iran.liara.run/api/musics/upload-music\",\n                formData\n            ).then((res) => { })\n                .then((data) => {\n                    setLoading(false);\n                });\n        } catch (ex) {\n            setLoading(false);\n        }\n    }\n    if(!userInfo) return(<NeedToLogin />)\n    if(!(userInfo?.role=='admin')) return(<NoAccess />)\n\n\n    return (\n        <div className='form-holder'>\n            <Backdrop\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open={loading}\n            >\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n            <form className='upload-music-form'>\n                <input type=\"text\" placeholder=\"نام آهنگ\" onChange={(e) => titleChange(e)} value={title} />\n                <input type=\"text\" placeholder=\"توضیحات آهنگ\" onChange={(e) => descChange(e)} value={desc} />\n                <input type=\"text\" placeholder=\"دسته بندی\" onChange={(e) => categoryChange(e)} value={category} />\n                <input type=\"text\" placeholder=\"خواننده ها\" onChange={(e) => artistChange(e)} value={artist} />\n                <label>عکس آهنگ را آپلود کنید</label>\n                <input type=\"file\" name=\"coverImage\" onChange={(e) => onChangeCoverImage(e)} />\n                <label>آهنگ را آپلود کنید</label>\n                <input type=\"file\" name=\"music\" onChange={(e) => onChangeMusic(e)} />\n                <button type=\"submit\" className='form-btn' onClick={(e) => onClick(e)}>ایجاد موزیک</button>\n            </form>\n\n        </div>\n    )\n}\n\nexport default UploadMusic"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}