{"ast":null,"code":"import _slicedToArray from\"/home/saoshyant/Documents/GitHub/music-pwa-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import LoadingOval from'../componenets/LoadingOval/LoadingOval';import Backdrop from'@mui/material/Backdrop';import CircularProgress from'@mui/material/CircularProgress';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ArtistPage=function ArtistPage(_ref){var data=_ref.data,setData=_ref.setData,setMusicInfo=_ref.setMusicInfo;var param=useParams();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),limit=_useState4[0],setLimit=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),musicCount=_useState6[0],setMusicCount=_useState6[1];useEffect(function(){var _param$;var option={method:'POST',body:JSON.stringify({artist:param===null||param===void 0?void 0:(_param$=param['*'])===null||_param$===void 0?void 0:_param$.replace('%20',' '),limit:limit*9+9}),headers:{'Content-type':'application/json; charset=UTF-8'}};setLoading(true);fetch(\"https://music-pwa-api.iran.liara.run/api/musics/artist\",option).then(function(res){return res.json();}).then(function(d){setData(d.musics);setMusicCount(d.count);setLoading(false);});},[]);var loadmore=function loadmore(){var _param$2;setLimit(limit+1);var option={method:'POST',body:JSON.stringify({artist:param===null||param===void 0?void 0:(_param$2=param['*'])===null||_param$2===void 0?void 0:_param$2.replace('%20',' '),limit:(limit+1)*9+9}),headers:{'Content-type':'application/json; charset=UTF-8'}};setLoading(true);fetch(\"https://music-pwa-api.iran.liara.run/api/musics/artist\",option).then(function(res){return res.json();}).then(function(d){setData(d.musics);setMusicCount(d.count);setLoading(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content-holder\",children:[/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"music-section-title\",children:param===null||param===void 0?void 0:param['*']}),/*#__PURE__*/_jsx(\"div\",{className:\"music-section\",children:data===null||data===void 0?void 0:data.map(function(q,index){var _q$artist;return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"img\",{src:q===null||q===void 0?void 0:q.coverImagePath,alt:\"\",onClick:function onClick(){return setMusicInfo(q);},className:\"song-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"song-name\",children:q===null||q===void 0?void 0:q.title}),/*#__PURE__*/_jsx(\"h4\",{className:\"artist-name\",children:q===null||q===void 0?void 0:(_q$artist=q.artist)===null||_q$artist===void 0?void 0:_q$artist.map(function(r){return r+\" \";})})]},index);})}),musicCount>(data===null||data===void 0?void 0:data.length)?/*#__PURE__*/_jsx(\"div\",{className:\"loadmore-btn\",onClick:function onClick(){return loadmore();},children:\"\\u0628\\u06CC\\u0634\\u062A\\u0631 \\u0646\\u0634\\u0627\\u0646 \\u0628\\u062F\\u0647\"}):'']});};export default ArtistPage;","map":{"version":3,"names":["React","useEffect","useState","LoadingOval","Backdrop","CircularProgress","useParams","ArtistPage","data","setData","setMusicInfo","param","loading","setLoading","limit","setLimit","musicCount","setMusicCount","option","method","body","JSON","stringify","artist","replace","headers","fetch","then","res","json","d","musics","count","loadmore","color","zIndex","theme","drawer","map","q","index","coverImagePath","title","r","length"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/ArtistPage.jsx"],"sourcesContent":["import React, { useEffect,useState } from 'react'\nimport LoadingOval from '../componenets/LoadingOval/LoadingOval'\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { useParams } from 'react-router-dom'\n\nconst ArtistPage = ({data,setData,setMusicInfo}) => {\n  const param = useParams()\n  const [loading, setLoading] = useState(false)\n  const [limit, setLimit] = useState(0);\n  const [musicCount, setMusicCount] = useState(null);\n  useEffect(() => {\n    \n    const option = {\n      method: 'POST',\n      body:JSON.stringify({\n        artist:param?.['*']?.replace('%20',' '),\n        limit:limit*9+9\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n      }\n    };\n    setLoading(true);\n    fetch(`https://music-pwa-api.iran.liara.run/api/musics/artist`, option)\n      .then((res) => res.json())\n      .then((d) => {\n        setData(d.musics);\n        setMusicCount(d.count);\n        setLoading(false);\n      })\n      \n  }, []);\n\n  const loadmore=()=>{\n    setLimit(limit+1);\n    const option = {\n      method: 'POST',\n      body:JSON.stringify({\n        artist:param?.['*']?.replace('%20',' '),\n        limit:(limit+1)*9+9\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n      }\n    };\n    setLoading(true);\n    fetch(`https://music-pwa-api.iran.liara.run/api/musics/artist`, option)\n      .then((res) => res.json())\n      .then((d) => {\n        setData(d.musics);\n        setMusicCount(d.count);\n        setLoading(false);\n      })\n  }\n  \n  return (\n    <div className='page-content-holder'>\n        <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={loading}\n      >\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <h2 className=\"music-section-title\">{param?.['*']}</h2>\n      <div className=\"music-section\">\n        {data?.map((q, index) => {\n          return (\n            <div key={index} className=\"post\">\n              <img src={q?.coverImagePath} alt=\"\" onClick={()=>setMusicInfo(q)} className=\"song-image\" />\n              <h3 className=\"song-name\">{q?.title}</h3>\n              <h4 className=\"artist-name\">{q?.artist?.map(r => { return (r + \" \") })}</h4>\n            </div>\n          )\n        })}\n      </div>\n      { musicCount>data?.length ? <div className='loadmore-btn' onClick={()=>loadmore()}>بیشتر نشان بده</div> : ''}\n    </div>\n  )\n}\n\nexport default ArtistPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}