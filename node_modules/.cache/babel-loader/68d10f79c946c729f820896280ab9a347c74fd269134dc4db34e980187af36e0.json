{"ast":null,"code":"var _jsxFileName = \"/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/UploadMusic.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport NeedToLogin from '../componenets/NeedToLogin/NeedToLogin';\nimport NoAccess from '../componenets/NoAccess/NoAccess';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadMusic = () => {\n  _s();\n  var _userInfo;\n  const [loading, setLoading] = useState(false);\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const [category, setCategory] = useState('');\n  const [artist, setArtist] = useState('');\n  const [coverImage, setCoverImage] = useState('');\n  const [music, setMusic] = useState('');\n  const titleChange = e => {\n    setTitle(e.target.value);\n  };\n  const descChange = e => {\n    setDesc(e.target.value);\n  };\n  const categoryChange = e => {\n    setCategory(e.target.value);\n  };\n  const artistChange = e => {\n    setArtist(e.target.value);\n  };\n  const onChangeCoverImage = e => {\n    setCoverImage(e.target.files[0]);\n  };\n  const onChangeMusic = e => {\n    setMusic(e.target.files[0]);\n  };\n  const onClick = e => {\n    e.preventDefault();\n    const jwtToken = document.cookie.split('=')[1];\n    const formData = new FormData();\n    formData.append(\"coverImage\", coverImage);\n    formData.append(\"music\", music);\n    formData.append(\"title\", title);\n    formData.append(\"desc\", desc);\n    formData.append(\"category\", category);\n    formData.append(\"artist\", artist);\n    formData.append(\"jwtToken\", jwtToken);\n    try {\n      setLoading(true);\n      axios.post(\"https://music-pwa-api.iran.liara.run/api/musics/upload-music\", formData).then(res => {}).then(data => {\n        setLoading(false);\n      });\n    } catch (ex) {\n      setLoading(false);\n    }\n  };\n  if (!userInfo) return /*#__PURE__*/_jsxDEV(NeedToLogin, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 26\n  }, this);\n  if (!(((_userInfo = userInfo) === null || _userInfo === void 0 ? void 0 : _userInfo.role) == 'admin')) return /*#__PURE__*/_jsxDEV(NoAccess, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 43\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-holder\",\n    children: [/*#__PURE__*/_jsxDEV(Backdrop, {\n      sx: {\n        color: '#fff',\n        zIndex: theme => theme.zIndex.drawer + 1\n      },\n      open: loading,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n        color: \"inherit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"upload-music-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0646\\u0627\\u0645 \\u0622\\u0647\\u0646\\u06AF\",\n        onChange: e => titleChange(e),\n        value: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u062A\\u0648\\u0636\\u06CC\\u062D\\u0627\\u062A \\u0622\\u0647\\u0646\\u06AF\",\n        onChange: e => descChange(e),\n        value: desc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u062F\\u0633\\u062A\\u0647 \\u0628\\u0646\\u062F\\u06CC\",\n        onChange: e => categoryChange(e),\n        value: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u062E\\u0648\\u0627\\u0646\\u0646\\u062F\\u0647 \\u0647\\u0627\",\n        onChange: e => artistChange(e),\n        value: artist\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0639\\u06A9\\u0633 \\u0622\\u0647\\u0646\\u06AF \\u0631\\u0627 \\u0622\\u067E\\u0644\\u0648\\u062F \\u06A9\\u0646\\u06CC\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"coverImage\",\n        onChange: e => onChangeCoverImage(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0622\\u0647\\u0646\\u06AF \\u0631\\u0627 \\u0622\\u067E\\u0644\\u0648\\u062F \\u06A9\\u0646\\u06CC\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"music\",\n        onChange: e => onChangeMusic(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form-btn\",\n        onClick: e => onClick(e),\n        children: \"\\u0627\\u06CC\\u062C\\u0627\\u062F \\u0645\\u0648\\u0632\\u06CC\\u06A9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n_s(UploadMusic, \"aB6dAGGxHyYVL9p1ianBq9E4Rdc=\");\n_c = UploadMusic;\nexport default UploadMusic;\nvar _c;\n$RefreshReg$(_c, \"UploadMusic\");","map":{"version":3,"names":["React","useState","axios","Backdrop","CircularProgress","NeedToLogin","NoAccess","UploadMusic","loading","setLoading","title","setTitle","desc","setDesc","category","setCategory","artist","setArtist","coverImage","setCoverImage","music","setMusic","titleChange","e","target","value","descChange","categoryChange","artistChange","onChangeCoverImage","files","onChangeMusic","onClick","preventDefault","jwtToken","document","cookie","split","formData","FormData","append","post","then","res","data","ex","userInfo","role","color","zIndex","theme","drawer"],"sources":["/home/saoshyant/Documents/GitHub/music-pwa-frontend/src/pages/UploadMusic.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios';\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport NeedToLogin from '../componenets/NeedToLogin/NeedToLogin'\nimport NoAccess from '../componenets/NoAccess/NoAccess'\n\n\nconst UploadMusic = () => {\n\n\n    const [loading, setLoading] = useState(false)\n\n    const [title, setTitle] = useState('');\n    const [desc, setDesc] = useState('');\n    const [category, setCategory] = useState('');\n    const [artist, setArtist] = useState('');\n    const [coverImage, setCoverImage] = useState('');\n    const [music, setMusic] = useState('');\n\n    const titleChange = (e) => {\n        setTitle(e.target.value);\n    }\n\n    const descChange = (e) => {\n        setDesc(e.target.value);\n    }\n    const categoryChange = (e) => {\n        setCategory(e.target.value);\n    }\n    const artistChange = (e) => {\n        setArtist(e.target.value);\n    }\n    const onChangeCoverImage = (e) => {\n        setCoverImage(e.target.files[0]);\n    }\n    const onChangeMusic = (e) => {\n        setMusic(e.target.files[0]);\n    }\n\n    const onClick = (e) => {\n        e.preventDefault();\n        const jwtToken = document.cookie.split('=')[1];\n        const formData = new FormData();\n        formData.append(\"coverImage\", coverImage);\n        formData.append(\"music\", music);\n        formData.append(\"title\", title);\n        formData.append(\"desc\", desc);\n        formData.append(\"category\", category);\n        formData.append(\"artist\", artist);\n        formData.append(\"jwtToken\", jwtToken);\n        try {\n            setLoading(true);\n            axios.post(\n                \"https://music-pwa-api.iran.liara.run/api/musics/upload-music\",\n                formData\n            ).then((res) => { })\n                .then((data) => {\n                    setLoading(false);\n                });\n        } catch (ex) {\n            setLoading(false);\n        }\n    }\n    if(!userInfo) return(<NeedToLogin />)\n    if(!(userInfo?.role=='admin')) return(<NoAccess />)\n\n\n    return (\n        <div className='form-holder'>\n            <Backdrop\n                sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n                open={loading}\n            >\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n            <form className='upload-music-form'>\n                <input type=\"text\" placeholder=\"نام آهنگ\" onChange={(e) => titleChange(e)} value={title} />\n                <input type=\"text\" placeholder=\"توضیحات آهنگ\" onChange={(e) => descChange(e)} value={desc} />\n                <input type=\"text\" placeholder=\"دسته بندی\" onChange={(e) => categoryChange(e)} value={category} />\n                <input type=\"text\" placeholder=\"خواننده ها\" onChange={(e) => artistChange(e)} value={artist} />\n                <label>عکس آهنگ را آپلود کنید</label>\n                <input type=\"file\" name=\"coverImage\" onChange={(e) => onChangeCoverImage(e)} />\n                <label>آهنگ را آپلود کنید</label>\n                <input type=\"file\" name=\"music\" onChange={(e) => onChangeMusic(e)} />\n                <button type=\"submit\" className='form-btn' onClick={(e) => onClick(e)}>ایجاد موزیک</button>\n            </form>\n\n        </div>\n    )\n}\n\nexport default UploadMusic"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,gBAAgB,MAAM,gCAAgC;AAC7D,OAAOC,WAAW,MAAM,wCAAwC;AAChE,OAAOC,QAAQ,MAAM,kCAAkC;AAAA;AAGvD,MAAMC,WAAW,GAAG,MAAM;EAAA;EAAA;EAGtB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACiB,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAMqB,WAAW,GAAIC,CAAC,IAAK;IACvBZ,QAAQ,CAACY,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC5B,CAAC;EAED,MAAMC,UAAU,GAAIH,CAAC,IAAK;IACtBV,OAAO,CAACU,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC3B,CAAC;EACD,MAAME,cAAc,GAAIJ,CAAC,IAAK;IAC1BR,WAAW,CAACQ,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC/B,CAAC;EACD,MAAMG,YAAY,GAAIL,CAAC,IAAK;IACxBN,SAAS,CAACM,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC7B,CAAC;EACD,MAAMI,kBAAkB,GAAIN,CAAC,IAAK;IAC9BJ,aAAa,CAACI,CAAC,CAACC,MAAM,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC;EACD,MAAMC,aAAa,GAAIR,CAAC,IAAK;IACzBF,QAAQ,CAACE,CAAC,CAACC,MAAM,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC;EAC/B,CAAC;EAED,MAAME,OAAO,GAAIT,CAAC,IAAK;IACnBA,CAAC,CAACU,cAAc,EAAE;IAClB,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC9C,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEtB,UAAU,CAAC;IACzCoB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEpB,KAAK,CAAC;IAC/BkB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE9B,KAAK,CAAC;IAC/B4B,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE5B,IAAI,CAAC;IAC7B0B,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE1B,QAAQ,CAAC;IACrCwB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAExB,MAAM,CAAC;IACjCsB,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEN,QAAQ,CAAC;IACrC,IAAI;MACAzB,UAAU,CAAC,IAAI,CAAC;MAChBP,KAAK,CAACuC,IAAI,CACN,8DAA8D,EAC9DH,QAAQ,CACX,CAACI,IAAI,CAAEC,GAAG,IAAK,CAAE,CAAC,CAAC,CACfD,IAAI,CAAEE,IAAI,IAAK;QACZnC,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC;IACV,CAAC,CAAC,OAAOoC,EAAE,EAAE;MACTpC,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EACD,IAAG,CAACqC,QAAQ,EAAE,oBAAO,QAAC,WAAW;IAAA;IAAA;IAAA;EAAA,QAAG;EACpC,IAAG,EAAE,cAAAA,QAAQ,8CAAR,UAAUC,IAAI,KAAE,OAAO,CAAC,EAAE,oBAAO,QAAC,QAAQ;IAAA;IAAA;IAAA;EAAA,QAAG;EAGlD,oBACI;IAAK,SAAS,EAAC,aAAa;IAAA,wBACxB,QAAC,QAAQ;MACL,EAAE,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAGC,KAAK,IAAKA,KAAK,CAACD,MAAM,CAACE,MAAM,GAAG;MAAE,CAAE;MAClE,IAAI,EAAE3C,OAAQ;MAAA,uBAEd,QAAC,gBAAgB;QAAC,KAAK,EAAC;MAAS;QAAA;QAAA;QAAA;MAAA;IAAG;MAAA;MAAA;MAAA;IAAA,QAC7B,eACX;MAAM,SAAS,EAAC,mBAAmB;MAAA,wBAC/B;QAAO,IAAI,EAAC,MAAM;QAAC,WAAW,EAAC,6CAAU;QAAC,QAAQ,EAAGe,CAAC,IAAKD,WAAW,CAACC,CAAC,CAAE;QAAC,KAAK,EAAEb;MAAM;QAAA;QAAA;QAAA;MAAA,QAAG,eAC3F;QAAO,IAAI,EAAC,MAAM;QAAC,WAAW,EAAC,qEAAc;QAAC,QAAQ,EAAGa,CAAC,IAAKG,UAAU,CAACH,CAAC,CAAE;QAAC,KAAK,EAAEX;MAAK;QAAA;QAAA;QAAA;MAAA,QAAG,eAC7F;QAAO,IAAI,EAAC,MAAM;QAAC,WAAW,EAAC,mDAAW;QAAC,QAAQ,EAAGW,CAAC,IAAKI,cAAc,CAACJ,CAAC,CAAE;QAAC,KAAK,EAAET;MAAS;QAAA;QAAA;QAAA;MAAA,QAAG,eAClG;QAAO,IAAI,EAAC,MAAM;QAAC,WAAW,EAAC,yDAAY;QAAC,QAAQ,EAAGS,CAAC,IAAKK,YAAY,CAACL,CAAC,CAAE;QAAC,KAAK,EAAEP;MAAO;QAAA;QAAA;QAAA;MAAA,QAAG,eAC/F;QAAA,UAAO;MAAsB;QAAA;QAAA;QAAA;MAAA,QAAQ,eACrC;QAAO,IAAI,EAAC,MAAM;QAAC,IAAI,EAAC,YAAY;QAAC,QAAQ,EAAGO,CAAC,IAAKM,kBAAkB,CAACN,CAAC;MAAE;QAAA;QAAA;QAAA;MAAA,QAAG,eAC/E;QAAA,UAAO;MAAkB;QAAA;QAAA;QAAA;MAAA,QAAQ,eACjC;QAAO,IAAI,EAAC,MAAM;QAAC,IAAI,EAAC,OAAO;QAAC,QAAQ,EAAGA,CAAC,IAAKQ,aAAa,CAACR,CAAC;MAAE;QAAA;QAAA;QAAA;MAAA,QAAG,eACrE;QAAQ,IAAI,EAAC,QAAQ;QAAC,SAAS,EAAC,UAAU;QAAC,OAAO,EAAGA,CAAC,IAAKS,OAAO,CAACT,CAAC,CAAE;QAAA,UAAC;MAAW;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACxF;EAAA;IAAA;IAAA;IAAA;EAAA,QAEL;AAEd,CAAC;AAAA,GAlFKhB,WAAW;AAAA,KAAXA,WAAW;AAoFjB,eAAeA,WAAW;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}